<div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
	<header>
		<p>Folders</p>
	</header>
	<div style="overflow:auto;">
		<js-tree tree-data="scope" tree-model="wbFiles.treeGetNodeChildren" tree-plugins="contextmenu"
			tree-contextmenu="wbFiles.treeContextMenu" tree-nodes-to-load="wbFiles.treeNodesToLoad" tree-nodes-to-open="wbFiles.treeNodesToOpen"
			tree-events="loaded:wbFiles.treeRootLoaded;open_node:wbFiles.treeOpenNodeCB;activate_node:wbFiles.treeActivateNodeCB" ></js-tree>
	</div>
</div>

<section ui-view class="col-lg-9 col-lg-offset-0 col-md-9 col-md-offset-0 col-sm-12 col-sm-offset-3 col-xs-12 col-xs-offset-0">
	<header>
		<div class="dropdown pull-right">
			<a toggle="dropdown" class="dropdown-toggle toggle-sign" href=""><span class="glyphicon glyphicon-menu-hamburger"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li><a href="" ng-click="wbFiles.treeCreateFolder(wbFiles.selectedDir)">Create Folder in {{wbFiles.selectedDir.text}}</a></li>
				<li><a href="" ng-click="wbFiles.treeUploadFile(wbFiles.selectedDir)">Upload File to {{wbFiles.selectedDir.text}}</a></li>
			</ul>
		</div>
		<p>Files</p>
	</header>
	<div>
		<ol class="breadcrumb" style="margin:2px 0 0;">
			<li ng-repeat="dir in wbFiles.selectedDirAncestors">
				<a href="" ng-click="wbFiles.navigateToDir(dir.id)">{{dir.text}}</a>
			</li>
			<!--li class="active">Subdirectory 1</li-->
		</ol>
		<div class="users-table" style="margin-top:3px; border-top:none;">
			<table class="table">
				<thead>
					<tr>
						<td>Name</td>
						<td>Owner</td>
						<td>Last Modified</td>
						<td>File Size</td>
						<td>Actions</td>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="item in wbFiles.selectedDirItems">
						<td>
							<a ng-if="item.isDirectory" ng-dblclick="wbFiles.openDir(item.id)"
								context-menu="partials/workbench/fileContextMenu.html" context-event="contextmenu" ng-model="item"
								href="" tabindex="-1" class="filemanager-anchor">
								<i class="filemanager-icon filemanager-icon-directory" role="presentation"></i>
								{{item.text}}
							</a>
							<a ng-if="!item.isDirectory" ng-dblclick="wbFiles.viewFileContents(item.id)"
								href="" tabindex="-1" class="filemanager-anchor">
								<i class="filemanager-icon filemanager-icon-file" role="presentation"></i>
								{{item.text}}
							</a>
						</td>
						<td>{{item.owner}}</td>
						<td>{{item.lastModified}}</td>
						<td>{{item.size}}</td>
						<td>
							<a ng-if="!item.isDirectory" href="" ng-click="wbFiles.viewFileContents(item.id)">View</a>
							<a href="" ng-click="">Edit</a>
							<a href="" ng-click="">Delete</a>
						</td>
					</tr>
					<tr ng-if="wbFiles.isSparkDir">
						<td colspan="5">
							<div><i>This folder was generated by Spark. Click on one of the links below:</i></div>
							<div style="padding: 10px 0;">
								<button ng-click="wbFiles.viewSparkDir()" type="button" class="btn btn-default btn-sm">Folder contents</button>
								<button disabled="disabled" ng-click="wbFiles.viewSparkDir()" type="button" class="btn btn-default btn-sm">Datasets that include this folder</button>
							</div>
						</td>
					</tr>
					<tr ng-if="wbFiles.isSparkDir && wbFiles.sparkContents.length > 0"
						ng-repeat="sparkItem in wbFiles.sparkContents">
						<td colspan="5">
							{{sparkItem}}
						</td>
					</tr>
					<tr ng-if="!wbFiles.isSparkDir && wbFiles.selectedDirItems.length == 0">
						<td colspan="5"><i>The folder is empty.</i></td>
					</tr>
				</tbody>
			</table>
		</div><!-- end of table -->
		<div ng-show="wbFiles.selectedFileContents.length > 0" class="panel panel-default" style="margin-top:20px;">
			<div class="panel-heading">{{wbFiles.selectedFile.text}} Contents</div>
			<div class="insightal-table" style="margin-top:0; border:none;">
				<table class="table">
					<thead>
						<tr>
							<td>&nbsp;</td>
							<td ng-repeat="col in wbFiles.selectedFileColumns">
								<a href="" ng-click="wbFiles.selectedFileChangeOrder(col)">
									{{col}}
									<span class="sortorder" ng-show="wbFiles.selectedFileOrderKey === col" ng-class="{reverse:wbFiles.selectedFileOrderReverse}"></span>
								</a>
							</td>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="row in wbFiles.fileContForCurrentPage">
							<td>{{(wbFiles.fileContPage-1)*wbFiles.fileContRowsPerPage + $index + 1}}.</td>
							<td ng-repeat="colName in wbFiles.selectedFileColumns">{{row[colName]}}</td>
						</tr>
						<tr ng-if="wbFiles.selectedFileContents.length == 0">
							<td colspan="{{wbFiles.selectedFileColumns.length}}"><i>The file contains no data.</i></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="panel-footer">
				<pagination ng-model="wbFiles.fileContPage" num-pages="wbFiles.fileContPageCount" items-per-page="wbFiles.fileContRowsPerPage" total-items="wbFiles.fileContRowCount" max-size="10" rotate="false" boundary-links="true"></pagination>
			</div>
		</div>
	</div>
</section>